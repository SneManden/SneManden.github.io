<!DOCTYPE html> <html lang=da> <head> <meta charset=utf-8> <meta content="width=device-width,initial-scale=1" name=viewport> <base href=/ > <link href=manifest.json rel=manifest> <meta content=#358724 name=theme-color> <link href=favicon.ico rel=icon type=image/x-icon> <link href=/main.css rel=stylesheet> <link href=/normalize.css rel=stylesheet> <style>main.svelte-1jtvvyh.svelte-1jtvvyh{flex:1 1 auto;background:rgba(0,0,0,.125)}.container.svelte-1jtvvyh.svelte-1jtvvyh{width:100%;margin:0 auto;padding:20px;max-width:800px;box-sizing:border-box}main.svelte-1jtvvyh .container.svelte-1jtvvyh{border:2px solid rgba(0,0,0,.5);border-top:none;background:#fff;margin-bottom:calc((100vw - 800px)/ 2)}header .container.svelte-1jtvvyh.svelte-1jtvvyh{background:rgba(0,0,0,.75)}.images-wrapper.svelte-1jtvvyh.svelte-1jtvvyh{top:0;left:0;width:100%;height:100%;z-index:1;position:absolute}.typer-wrapper.svelte-1jtvvyh.svelte-1jtvvyh{position:relative;z-index:100}@media(max-width:800px){main.svelte-1jtvvyh .container.svelte-1jtvvyh{margin-bottom:0}header .container.svelte-1jtvvyh.svelte-1jtvvyh{padding:10px}}header.svelte-132eyxn.svelte-132eyxn{display:flex;position:relative;box-sizing:border-box;padding-top:10px;align-items:start;justify-content:start}nav.svelte-132eyxn.svelte-132eyxn{top:0;width:100%;z-index:100;position:fixed;overflow:hidden;background:#fff;box-sizing:border-box;border-top:3px solid #59c14b;line-height:44px;padding-left:calc((100vw - 100%));border-bottom:3px solid #358724;background:#59c14b;background:linear-gradient(90deg,#59c14b 0,#59c14b 50%,#358724 50%,#358724 100%)}nav.svelte-132eyxn .container.svelte-132eyxn{width:100%;margin:0 auto;display:flex;padding:0 20px;max-width:800px;box-sizing:border-box;background:#59c14b;background:-moz-linear-gradient(45deg,#59c14b 0,#59c14b 50%,#358724 50%,#358724 100%);background:-webkit-linear-gradient(45deg,#59c14b 0,#59c14b 50%,#358724 50%,#358724 100%);background:linear-gradient(45deg,#59c14b 0,#59c14b 50%,#358724 50%,#358724 100%)}nav.svelte-132eyxn ul.svelte-132eyxn{margin:0 -10px 0 auto;display:flex;list-style:none;justify-content:space-between}nav.svelte-132eyxn ul li.svelte-132eyxn{line-height:inherit}nav.svelte-132eyxn ul li a.svelte-132eyxn{color:#222;padding:0 10px;font-size:16px;transition:color .2s ease-in-out;text-decoration:none}nav.svelte-132eyxn ul li a.svelte-132eyxn:focus,nav.svelte-132eyxn ul li a.svelte-132eyxn:hover{color:#000;text-decoration:underline}nav.svelte-132eyxn h1.svelte-132eyxn{margin:0;font-size:24px}nav.svelte-132eyxn h1 a.svelte-132eyxn{color:inherit;text-decoration:none}@media(max-width:500px){nav.svelte-132eyxn h1.svelte-132eyxn{font-size:20px}nav.svelte-132eyxn ul li a.svelte-132eyxn{font-size:14px}}.post-gallery.svelte-1rat90s{margin:25px 0}.wrapper.svelte-1yce3id{width:80%;border:2px solid #358724;display:flex;padding:8px 20px;background:#59c14b;align-items:center;border-left:none;margin-left:-20px;border-top-right-radius:128px;border-bottom-right-radius:128px}.me.svelte-1yce3id{flex:0 0 auto;width:100px;height:100px;border:3px solid #fff;margin:0 -11px 0 11px;border-radius:50%;background:#fff;background-size:100%;background-image:url(/img/components/me/me2.jpg)}.link-btn.svelte-1yce3id{color:#eee;margin:0;cursor:pointer;border:none;padding:0;outline:0;display:inline;background:0 0;text-decoration:underline}.link-btn.svelte-1yce3id:focus,.link-btn.svelte-1yce3id:hover{color:#fff}.obfuscated.svelte-1yce3id{unicode-bidi:bidi-override;direction:rtl}@media(max-width:500px){.wrapper.svelte-1yce3id{width:90%}}</style> <title>Det skal være skidt, før det kan blive godt</title><meta content="Dårlig opsætning resulterer i tab af værdifuld information. Men det sætter også gang i en tiltrængt oprydningsproces..." name=Description> <link href=/client/client.cb032e34.css rel=preload as=style><link href=/client/Post.c2293b94.css rel=preload as=style><link href=/client/Me.fb9a73a2.css rel=preload as=style></head> <body> <div id=sapper> <header class=svelte-132eyxn style=height:50px></header> <nav class=svelte-132eyxn style=transform:translateY(0);height:50px><div class="svelte-132eyxn container"><h1 class=svelte-132eyxn><a href=/ class=svelte-132eyxn>snemanden.com</a></h1> <ul class=svelte-132eyxn><li class=svelte-132eyxn><a href=/blog rel=prefetch class=svelte-132eyxn>blog</a></li> <li class=svelte-132eyxn><a href=/om class=svelte-132eyxn>om</a></li> <li class=svelte-132eyxn><a href=/arkiv rel=prefetch class=svelte-132eyxn>arkiv</a></ul></div> </nav> <main class=svelte-1jtvvyh><div class="container svelte-1jtvvyh"> <article><header><h1>Det skal være skidt, før det kan blive godt</h1> <div class=right><div class=timestamp>2014-09-13</div> <div class=warning>Døde links!</div></div></header> <section><p>Jeg havde lige afsluttet et projekt (mit 3D WebGL spil <a href=/spil/foxescape rel="noopener noreferrer">foxescape</a>) og havde naturligvis brug for at få det ud til verden. I et ualmindelig dumt øjeblik ender jeg med at overskrive databasen på min hjemmeside med en halvt år ældre version. At rive sig selv i håret, og bande højlydt hjalp ikke meget.</p> <h2 id=problemet>Problemet</h2> <p>Det værste ved episoden er nok, at jeg har versions kontrol på hjemmesiden, så hvordan kan det overhovedet ske? Altså, at man så ikke kan få de data tilbage? Det hænger sammen med en utroligt dårlig opsætning. Jeg har et repository på mit webhotel og lokalt på min computer. Så ændringer til hjemmesiden pusher jeg bare til webhotellet, og de fremtræder på Internettet. På webhotellet er det sat op sådan, at et <code>post-receive-hook</code> kopierer indholdet ind i den egentlige directory, som serveren serverer til klienten. Så ændringer foretaget fra administrationsmodulet bliver ikke registreret af versions kontrollen, og bliver heller ikke synkroniseret med mit lokale repo.</p> <p>Så da jeg vælger at "hardcode" spilsiden ind på min hjemmeside — i stedet for at oprette en seperat side til det — bliver databasen åbenbart overskrevet med en gammel version. (Er det fordi jeg "kom til" at bruge <code>git add *</code>?) Det værste ved hele episoden var nok den erkendelsen af, at jeg <em>egentlig</em>, hvis jeg skal være helt ærlig, godt kendte til problemet.</p> <h2 id=fix-it>Fix it!</h2> <p>Well, da jeg jo ikke har andet at lave (<code>&lt;/sarkame></code>) vælger jeg en ny løsning: jeg skriver min hjemmeside om. Forleden, i forbindelse med at jeg så den <a href=https://archive.org/details/TheInternetsOwnBoyTheStoryOfAaronSwartz rel="noopener noreferrer" target=_blank>fremragende dokumentar om Aaron Swarts</a>, hans blogpost om <a href=http://www.aaronsw.com/weblog/000404 rel="noopener noreferrer" target=_blank>statisk serverede hjemmesider</a> og blev mindet om, at det måske var værd at prøve.</p> <p>Efter at have sonderet terrænet faldt jeg igen over <a href=http://flask.pocoo.org/ rel="noopener noreferrer" target=_blank>Flask</a>, et rigtig lækkert microframework til Python. Uden at vide det, har jeg endda en teori om, at det er inspireret af Aaron's eget, ufatteligt simple framework <a href=http://webpy.org/ rel="noopener noreferrer" target=_blank>webpy</a>.</p> <h3 id=design>Design</h3> <p>Væk med databasen, var min filosofi for rekreationen af &lt;snemanden.com>. Jeg ville benytte et simpel fil-baseret system, så det er hvad jeg gjorde. Jeg er også stor fan af <a href=http://daringfireball.net/projects/markdown/ rel="noopener noreferrer" target=_blank>Markdown</a> og især med udviklingen af en noget tiltrængt "standard", <a href=http://commonmark.org/ rel="noopener noreferrer" target=_blank>CommonMark</a> er det en virkelig lækker måde at skrive HTML-compilér bare tekster.</p> <p>Hver blogpost er således en simpel markdown-fil, med en lille header. Denne indeholder variabel data, som fx titel, url, dato, forfatter, etc. Hér måtte jeg naturligvis ty til Regular Expressions, som ved første øjekast kan ligne produktet af en kats gang på et tastatur. Jeg kan i denne proces stærkt anbefale <a href=http://www.regexr.com/ rel="noopener noreferrer" target=_blank>RegExr</a>.</p> <p>Og omtrent ~200 linjers pythonkode senere har jeg en fuldt funktionel blog og portofolio-side. Der er i skrivende stund stadig flere ting at gøre, før end at jeg kan være tilfreds med min nye side. Bl.a.</p> <ul> <li>Kompilere alle HTML sider på forhånd (bruger lige nu <a href=http://jinja.pocoo.org/docs/dev/templates/ rel="noopener noreferrer" target=_blank>Jinja2 rendering engine</a>)</li> <li>At mindske download-indtrykket af siden; dvs. bl.a. minify af stylesheets, javascript og komprimere billeder</li> <li>Gennemgå flask dokumentationen for generelle tips og tricks</li> <li>Bedre mobiltilpasning</li> </ul> <p>samt flere andre todo's.</p> <p>Alt i alt, er jeg ret imponeret over Flask frameworket, som er virkelig lækkert at arbejde med, og kræver minimal læring. Man føler bare at man skriver python, og bruger ikke tid på at skulle lære "yet-another-framework".</p> </section> <footer><div class="svelte-1yce3id wrapper"><div class=note><p>Tak fordi du læste med. </p> <p>Hvis du har kommentarer til indlægget, er du velkommen til at skrive en mail til mig på: <button class="svelte-1yce3id link-btn obfuscated">moc.nednamens@tkatnok </button>. </div> <div class="svelte-1yce3id me"></div> </div></footer> </article></div> </main> </div> <script>__SAPPER__={baseUrl:"",preloaded:[void 0,null,(function(a,b){return {post:{slug:"det-skal-vaere-skidt-foer-det-kan-blive-godt",html:"\u003Cp\u003EJeg havde lige afsluttet et projekt (mit 3D WebGL spil \u003Ca href=\"\u002Fspil\u002Ffoxescape\" rel=\"noopener noreferrer\"\u003Efoxescape\u003C\u002Fa\u003E)\nog havde naturligvis brug for at få det ud til verden. I et ualmindelig dumt\nøjeblik ender jeg med at overskrive databasen på min hjemmeside med en halvt\når ældre version. At rive sig selv i håret, og bande højlydt hjalp ikke meget.\u003C\u002Fp\u003E\n\u003Ch2 id=\"problemet\"\u003EProblemet\u003C\u002Fh2\u003E\n\u003Cp\u003EDet værste ved episoden er nok, at jeg har versions kontrol på hjemmesiden, så\nhvordan kan det overhovedet ske? Altså, at man så ikke kan få de data tilbage?\nDet hænger sammen med en utroligt dårlig opsætning. Jeg har et repository på\nmit webhotel og lokalt på min computer. Så ændringer til hjemmesiden pusher jeg\nbare til webhotellet, og de fremtræder på Internettet. På webhotellet er det sat\nop sådan, at et \u003Ccode\u003Epost-receive-hook\u003C\u002Fcode\u003E kopierer indholdet ind i den egentlige\ndirectory, som serveren serverer til klienten. Så ændringer foretaget fra\nadministrationsmodulet bliver ikke registreret af versions kontrollen, og bliver\nheller ikke synkroniseret med mit lokale repo.\u003C\u002Fp\u003E\n\u003Cp\u003ESå da jeg vælger at &quot;hardcode&quot; spilsiden ind på min hjemmeside &mdash; i\nstedet for at oprette en seperat side til det &mdash; bliver databasen åbenbart\noverskrevet med en gammel version. (Er det fordi jeg &quot;kom til&quot; at bruge\n\u003Ccode\u003Egit add *\u003C\u002Fcode\u003E?) Det værste ved hele episoden var nok den erkendelsen af,\nat jeg \u003Cem\u003Eegentlig\u003C\u002Fem\u003E, hvis jeg skal være helt ærlig, godt kendte til problemet.\u003C\u002Fp\u003E\n\u003Ch2 id=\"fix-it\"\u003EFix it!\u003C\u002Fh2\u003E\n\u003Cp\u003EWell, da jeg jo ikke har andet at lave (\u003Ccode\u003E&lt;\u002Fsarkame&gt;\u003C\u002Fcode\u003E) vælger jeg en ny løsning:\njeg skriver min hjemmeside om. Forleden, i forbindelse med at jeg så den\n\u003Ca href=\"https:\u002F\u002Farchive.org\u002Fdetails\u002FTheInternetsOwnBoyTheStoryOfAaronSwartz\" target=\"_blank\" rel=\"noopener noreferrer\"\u003Efremragende dokumentar om Aaron Swarts\u003C\u002Fa\u003E, hans blogpost om\n\u003Ca href=\"http:\u002F\u002Fwww.aaronsw.com\u002Fweblog\u002F000404\" target=\"_blank\" rel=\"noopener noreferrer\"\u003Estatisk serverede hjemmesider\u003C\u002Fa\u003E og blev mindet om, at det måske\nvar værd at prøve.\u003C\u002Fp\u003E\n\u003Cp\u003EEfter at have sonderet terrænet faldt jeg igen over \u003Ca href=\"http:\u002F\u002Fflask.pocoo.org\u002F\" target=\"_blank\" rel=\"noopener noreferrer\"\u003EFlask\u003C\u002Fa\u003E, et rigtig\nlækkert microframework til Python. Uden at vide det, har jeg endda en teori om,\nat det er inspireret af Aaron&#39;s eget, ufatteligt simple framework\n\u003Ca href=\"http:\u002F\u002Fwebpy.org\u002F\" target=\"_blank\" rel=\"noopener noreferrer\"\u003Ewebpy\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\u003Ch3 id=\"design\"\u003EDesign\u003C\u002Fh3\u003E\n\u003Cp\u003EVæk med databasen, var min filosofi for rekreationen af &lt;snemanden.com&gt;.\nJeg ville benytte et simpel fil-baseret system, så det er hvad jeg gjorde.\nJeg er også stor fan af \u003Ca href=\"http:\u002F\u002Fdaringfireball.net\u002Fprojects\u002Fmarkdown\u002F\" target=\"_blank\" rel=\"noopener noreferrer\"\u003EMarkdown\u003C\u002Fa\u003E og især med udviklingen af\nen noget tiltrængt &quot;standard&quot;, \u003Ca href=\"http:\u002F\u002Fcommonmark.org\u002F\" target=\"_blank\" rel=\"noopener noreferrer\"\u003ECommonMark\u003C\u002Fa\u003E er det en virkelig\nlækker måde at skrive HTML-compilér bare tekster.\u003C\u002Fp\u003E\n\u003Cp\u003EHver blogpost er således en simpel markdown-fil, med en lille header. Denne\nindeholder variabel data, som fx titel, url, dato, forfatter, etc. Hér måtte\njeg naturligvis ty til Regular Expressions, som ved første øjekast kan ligne\nproduktet af en kats gang på et tastatur. Jeg kan i denne proces stærkt\nanbefale \u003Ca href=\"http:\u002F\u002Fwww.regexr.com\u002F\" target=\"_blank\" rel=\"noopener noreferrer\"\u003ERegExr\u003C\u002Fa\u003E.\u003C\u002Fp\u003E\n\u003Cp\u003EOg omtrent ~200 linjers pythonkode senere har jeg en fuldt funktionel blog og\nportofolio-side. Der er i skrivende stund stadig flere ting at gøre, før end at\njeg kan være tilfreds med min nye side. Bl.a.\u003C\u002Fp\u003E\n\u003Cul\u003E\n\u003Cli\u003EKompilere alle HTML sider på forhånd (bruger lige nu\n\u003Ca href=\"http:\u002F\u002Fjinja.pocoo.org\u002Fdocs\u002Fdev\u002Ftemplates\u002F\" target=\"_blank\" rel=\"noopener noreferrer\"\u003EJinja2 rendering engine\u003C\u002Fa\u003E)\u003C\u002Fli\u003E\n\u003Cli\u003EAt mindske download-indtrykket af siden; dvs. bl.a. minify af stylesheets,\njavascript og komprimere billeder\u003C\u002Fli\u003E\n\u003Cli\u003EGennemgå flask dokumentationen for generelle tips og tricks\u003C\u002Fli\u003E\n\u003Cli\u003EBedre mobiltilpasning\u003C\u002Fli\u003E\n\u003C\u002Ful\u003E\n\u003Cp\u003Esamt flere andre todo&#39;s.\u003C\u002Fp\u003E\n\u003Cp\u003EAlt i alt, er jeg ret imponeret over Flask frameworket, som er virkelig lækkert\nat arbejde med, og kræver minimal læring. Man føler bare at man skriver python,\nog bruger ikke tid på at skulle lære &quot;yet-another-framework&quot;.\u003C\u002Fp\u003E\n",excerpt:"Jeg havde lige afsluttet et projekt (mit 3D WebGL spil \u003Ca href=\"\u002Fspil\u002Ffoxescape\" rel=\"noopener noreferrer\"\u003Efoxescape\u003C\u002Fa\u003E)\nog havde naturligvis brug for at få det ud til verden. I et ualmindelig dumt\nøjeblik ender jeg med at overskrive databasen på min hjemmeside med en halvt\når ældre version. At rive sig selv i håret, og bande højlydt hjalp ikke meget.",title:"Det skal være skidt, før det kan blive godt",author:"Casper Kehlet Jensen",description:"Dårlig opsætning resulterer i tab af værdifuld information. Men det sætter også gang i en tiltrængt oprydningsproces...",warning:"Døde links!",draft:a,published:{year:2014,month:9,date:13,timestamp:"2014-09-13"},hide:a,gallery_name:b,gallery_position:"top",gallery:b}}}(false,null))]};if('serviceWorker' in navigator)navigator.serviceWorker.register('/service-worker.js');var s=document.createElement("script");try{new Function("if(0)import('')")();s.src="/client/client.cb032e34.js";s.type="module";s.crossOrigin="use-credentials";}catch(e){s.src="/client/shimport@1.0.1.js";s.setAttribute("data-main","/client/client.cb032e34.js")}document.head.appendChild(s)</script> 