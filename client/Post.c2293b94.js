import{S as t,i as e,s,v as a,a as l,k as n,w as i,x as r,d as o,b as c,l as h,y as u,E as f,f as g,A as m,B as d,F as p,G as v,H as w,I as y,p as $,J as x,r as D,t as E,h as b,K as T,o as I,L as M,M as O,N as L,c as k,e as z,m as V,j as R,q as A}from"./client.cb032e34.js";import{M as N}from"./Me.fb9a73a2.js";class j{constructor(t,e){this.element=t,this.xDown=null,this.yDown=null,this.xDiff=null,this.yDiff=null,this.events={onLeft:()=>{},onRight:()=>{},onUp:()=>{},onDown:()=>{}},this.events=Object.assign(Object.assign({},this.events),e),this.xDown=null,this.yDown=null,this.element.addEventListener("touchstart",t=>{this.xDown=t.touches[0].clientX,this.yDown=t.touches[0].clientY},!1)}handleTouchMove(t){if(this.xDown&&this.yDown){var e=t.touches[0].clientX,s=t.touches[0].clientY;this.xDiff=this.xDown-e,this.yDiff=this.yDown-s,Math.abs(this.xDiff)>Math.abs(this.yDiff)?this.xDiff>0?this.events.onLeft():this.events.onRight():this.yDiff>0?this.events.onUp():this.events.onDown(),this.xDown=null,this.yDown=null}}run(){this.element.addEventListener("touchmove",t=>{this.handleTouchMove(t)},!1)}}function H(t,e,s){const a=t.slice();return a[15]=e[s],a}function _(t,e){let s,w,y,$,x,D,E=e[15].text+"";return{key:t,first:null,c(){s=a("div"),y=l(),$=a("p"),x=n(E),this.h()},l(t){s=i(t,"DIV",{class:!0,style:!0}),r(s).forEach(o),y=c(t),$=i(t,"P",{class:!0});var e=r($);x=h(e,E),e.forEach(o),this.h()},h(){u(s,"class","current-image svelte-oz0xve"),f(s,"background-image","url("+e[15].image+")"),u($,"class","svelte-oz0xve"),this.first=s},m(t,e){g(t,s,e),g(t,y,e),g(t,$,e),m($,x),D=!0},p(t,e){(!D||9&e)&&f(s,"background-image","url("+t[15].image+")"),(!D||9&e)&&E!==(E=t[15].text+"")&&d(x,E)},i(t){D||(p(()=>{w||(w=v(s,M,{duration:100},!0)),w.run(1)}),D=!0)},o(t){w||(w=v(s,M,{duration:100},!1)),w.run(0),D=!1},d(t){t&&o(s),t&&w&&w.end(),t&&o(y),t&&o($)}}}function C(t){let e,s,v,I,M,L,k,z,V,R,A,N,j,C,S,U,B,X,Y,F,P,W=[],q=new Map,G=t[3]+1+"",J=t[0].images.length+"",K=[t[0].images[t[3]]];const Q=t=>t[3];for(let e=0;e<1;e+=1){let s=H(t,K,e),a=Q(s);q.set(a,W[e]=_(a,s))}return{c(){e=a("div"),s=a("div");for(let t=0;t<1;t+=1)W[t].c();I=l(),M=a("div"),L=a("button"),k=n("☜"),V=l(),R=a("div"),A=n(G),N=n(" / "),j=n(J),C=l(),S=a("div"),U=a("button"),B=n("☞"),this.h()},l(t){e=i(t,"DIV",{class:!0});var a=r(e);s=i(a,"DIV",{class:!0,style:!0});var l=r(s);for(let t=0;t<1;t+=1)W[t].l(l);l.forEach(o),I=c(a),M=i(a,"DIV",{class:!0});var n=r(M);L=i(n,"BUTTON",{class:!0,disabled:!0});var u=r(L);k=h(u,"☜"),u.forEach(o),n.forEach(o),V=c(a),R=i(a,"DIV",{class:!0});var f=r(R);A=h(f,G),N=h(f," / "),j=h(f,J),f.forEach(o),C=c(a),S=i(a,"DIV",{class:!0});var g=r(S);U=i(g,"BUTTON",{class:!0,disabled:!0});var m=r(U);B=h(m,"☞"),m.forEach(o),g.forEach(o),a.forEach(o),this.h()},h(){u(s,"class","image-viewer-wrapper svelte-oz0xve"),f(s,"height",t[2]+"px"),p(()=>t[9].call(s)),u(L,"class","prev svelte-oz0xve"),L.disabled=z=0===t[3],u(M,"class","btn-wrapper prev-wrapper svelte-oz0xve"),u(R,"class","image-index svelte-oz0xve"),u(U,"class","next svelte-oz0xve"),U.disabled=X=t[3]===t[0].images.length-1,u(S,"class","btn-wrapper next-wrapper svelte-oz0xve"),u(e,"class","wrapper svelte-oz0xve")},m(a,l){g(a,e,l),m(e,s);for(let t=0;t<1;t+=1)W[t].m(s,null);v=w(s,t[9].bind(s)),t[10](s),m(e,I),m(e,M),m(M,L),m(L,k),m(e,V),m(e,R),m(R,A),m(R,N),m(R,j),m(e,C),m(e,S),m(S,U),m(U,B),Y=!0,F||(P=[y(window,"keydown",t[7]),y(L,"click",t[6]),y(U,"click",t[5])],F=!0)},p(t,[e]){if(9&e){const a=[t[0].images[t[3]]];$(),W=x(W,e,Q,1,t,a,q,s,O,_,null,H),D()}(!Y||4&e)&&f(s,"height",t[2]+"px"),(!Y||8&e&&z!==(z=0===t[3]))&&(L.disabled=z),(!Y||8&e)&&G!==(G=t[3]+1+"")&&d(A,G),(!Y||1&e)&&J!==(J=t[0].images.length+"")&&d(j,J),(!Y||9&e&&X!==(X=t[3]===t[0].images.length-1))&&(U.disabled=X)},i(t){if(!Y){for(let t=0;t<1;t+=1)E(W[t]);Y=!0}},o(t){for(let t=0;t<1;t+=1)b(W[t]);Y=!1},d(s){s&&o(e);for(let t=0;t<1;t+=1)W[t].d();v(),t[10](null),F=!1,T(P)}}}function S(t,e,s){let{gallery:a}=e,{wrap:l=!1}=e;const n=(t=>{var e;const s=/^(\d+):(\d+)$/.exec(null!=t?t:""),[a,l]=null!==(e=null==s?void 0:s.slice(1))&&void 0!==e?e:[];return t=>t/parseInt(null!=a?a:16)*parseInt(null!=l?l:9)})(a.image_ratio);let i=0,r=0,o=0;const c=()=>((t=!1)=>{s(3,o=l||t?(o+1)%a.images.length:Math.min(o+1,a.images.length-1))})(),h=()=>{s(3,o=l?0===o?a.images.length-1:o-1:Math.max(0,o-1))};let u,f;return I(()=>{console.log("imageWrapper:",u),f=new j(u,{onLeft:()=>h(),onRight:()=>c()}),f.run()}),t.$$set=t=>{"gallery"in t&&s(0,a=t.gallery),"wrap"in t&&s(8,l=t.wrap)},t.$$.update=()=>{2&t.$$.dirty&&s(2,r=n(i))},[a,i,r,o,u,c,h,t=>{switch(t.key){case"ArrowLeft":h();break;case"ArrowRight":c()}},l,function(){i=this.clientWidth,s(1,i)},function(t){L[t?"unshift":"push"](()=>{u=t,s(4,u)})}]}class U extends t{constructor(t){super(),e(this,t,S,C,s,{gallery:0,wrap:8})}}function B(t){let e,s,l=t[0].warning+"";return{c(){e=a("div"),s=n(l),this.h()},l(t){e=i(t,"DIV",{class:!0});var a=r(e);s=h(a,l),a.forEach(o),this.h()},h(){u(e,"class","warning")},m(t,a){g(t,e,a),m(e,s)},p(t,e){1&e&&l!==(l=t[0].warning+"")&&d(s,l)},d(t){t&&o(e)}}}function X(t){let e,s,l;return s=new U({props:{gallery:t[0].gallery}}),{c(){e=a("section"),k(s.$$.fragment),this.h()},l(t){e=i(t,"SECTION",{class:!0});var a=r(e);z(s.$$.fragment,a),a.forEach(o),this.h()},h(){u(e,"class","post-gallery svelte-1rat90s")},m(t,a){g(t,e,a),V(s,e,null),l=!0},p(t,e){const a={};1&e&&(a.gallery=t[0].gallery),s.$set(a)},i(t){l||(E(s.$$.fragment,t),l=!0)},o(t){b(s.$$.fragment,t),l=!1},d(t){t&&o(e),R(s)}}}function Y(t){let e,s,l;return s=new U({props:{gallery:t[0].gallery}}),{c(){e=a("section"),k(s.$$.fragment),this.h()},l(t){e=i(t,"SECTION",{class:!0});var a=r(e);z(s.$$.fragment,a),a.forEach(o),this.h()},h(){u(e,"class","post-gallery svelte-1rat90s")},m(t,a){g(t,e,a),V(s,e,null),l=!0},p(t,e){const a={};1&e&&(a.gallery=t[0].gallery),s.$set(a)},i(t){l||(E(s.$$.fragment,t),l=!0)},o(t){b(s.$$.fragment,t),l=!1},d(t){t&&o(e),R(s)}}}function F(t){let e,s,f,v,w,x,T,I,M,O,L,j,H,_,C,S,U,F,P,W,q,G,J,K,Q=!1,Z=()=>{Q=!1},tt=t[0].title+"",et=t[0].published.timestamp+"",st=t[0].html+"";p(t[2]),document.title=s=t[0].title;let at=t[0].warning&&B(t),lt=t[0].gallery&&"top"===t[0].gallery_position&&X(t),nt=t[0].gallery&&"bottom"===t[0].gallery_position&&Y(t);return q=new N({}),{c(){f=a("meta"),w=l(),x=a("article"),T=a("header"),I=a("h1"),M=n(tt),O=l(),L=a("div"),j=a("div"),H=n(et),_=l(),at&&at.c(),C=l(),lt&&lt.c(),S=l(),U=a("section"),F=l(),nt&&nt.c(),P=l(),W=a("footer"),k(q.$$.fragment),this.h()},l(t){const e=A('[data-svelte="svelte-hnowxl"]',document.head);f=i(e,"META",{name:!0,content:!0}),e.forEach(o),w=c(t),x=i(t,"ARTICLE",{});var s=r(x);T=i(s,"HEADER",{});var a=r(T);I=i(a,"H1",{});var l=r(I);M=h(l,tt),l.forEach(o),O=c(a),L=i(a,"DIV",{class:!0});var n=r(L);j=i(n,"DIV",{class:!0});var u=r(j);H=h(u,et),u.forEach(o),_=c(n),at&&at.l(n),n.forEach(o),a.forEach(o),C=c(s),lt&&lt.l(s),S=c(s),U=i(s,"SECTION",{}),r(U).forEach(o),F=c(s),nt&&nt.l(s),P=c(s),W=i(s,"FOOTER",{});var g=r(W);z(q.$$.fragment,g),g.forEach(o),s.forEach(o),this.h()},h(){u(f,"name","Description"),u(f,"content",v=t[0].description),u(j,"class","timestamp"),u(L,"class","right")},m(s,a){m(document.head,f),g(s,w,a),g(s,x,a),m(x,T),m(T,I),m(I,M),m(T,O),m(T,L),m(L,j),m(j,H),m(L,_),at&&at.m(L,null),m(x,C),lt&&lt.m(x,null),m(x,S),m(x,U),U.innerHTML=st,m(x,F),nt&&nt.m(x,null),m(x,P),m(x,W),V(q,W,null),G=!0,J||(K=y(window,"scroll",()=>{Q=!0,clearTimeout(e),e=setTimeout(Z,100),t[2]()}),J=!0)},p(t,[a]){2&a&&!Q&&(Q=!0,clearTimeout(e),scrollTo(window.pageXOffset,t[1]),e=setTimeout(Z,100)),(!G||1&a)&&s!==(s=t[0].title)&&(document.title=s),(!G||1&a&&v!==(v=t[0].description))&&u(f,"content",v),(!G||1&a)&&tt!==(tt=t[0].title+"")&&d(M,tt),(!G||1&a)&&et!==(et=t[0].published.timestamp+"")&&d(H,et),t[0].warning?at?at.p(t,a):(at=B(t),at.c(),at.m(L,null)):at&&(at.d(1),at=null),t[0].gallery&&"top"===t[0].gallery_position?lt?(lt.p(t,a),1&a&&E(lt,1)):(lt=X(t),lt.c(),E(lt,1),lt.m(x,S)):lt&&($(),b(lt,1,1,()=>{lt=null}),D()),(!G||1&a)&&st!==(st=t[0].html+"")&&(U.innerHTML=st),t[0].gallery&&"bottom"===t[0].gallery_position?nt?(nt.p(t,a),1&a&&E(nt,1)):(nt=Y(t),nt.c(),E(nt,1),nt.m(x,P)):nt&&($(),b(nt,1,1,()=>{nt=null}),D())},i(t){G||(E(lt),E(nt),E(q.$$.fragment,t),G=!0)},o(t){b(lt),b(nt),b(q.$$.fragment,t),G=!1},d(t){o(f),t&&o(w),t&&o(x),at&&at.d(),lt&&lt.d(),nt&&nt.d(),R(q),J=!1,K()}}}function P(t,e,s){let{post:a}=e,l=444;return t.$$set=t=>{"post"in t&&s(0,a=t.post)},[a,l,function(){s(1,l=window.pageYOffset)}]}class W extends t{constructor(t){super(),e(this,t,P,F,s,{post:0})}}export{W as P};
